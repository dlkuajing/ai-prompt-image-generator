# 🚀 AI提示词变体与图片生成工具 - 快速启动指南

## 📋 前置要求

1. **Python 3.8+** 已安装
2. **浏览器**（Chrome/Firefox/Safari推荐）
3. **网络连接**（需要访问Google API）

## 🔧 一键启动步骤

### 1️⃣ 打开终端并进入项目目录
```bash
cd /Users/c.joelin/Desktop/跨海帆-闪图/backend
```

### 2️⃣ 激活虚拟环境并启动后端
```bash
# 激活Python虚拟环境
source venv/bin/activate

# 启动后端服务
python main.py
```

成功启动后会看到：
```
INFO:     Will watch for changes in these directories: ['/Users/c.joelin/Desktop/跨海帆-闪图/backend']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
🚀 启动提示词变体与图片生成工具
```

### 3️⃣ 打开前端界面
在浏览器中打开：
```
file:///Users/c.joelin/Desktop/跨海帆-闪图/index.html
```

或者双击打开 `index.html` 文件

## 💡 使用流程

1. **输入基础提示词**
   - 例如：`一个男人和一个女人在吵架`
   - 例如：`一群美国高中生在操场上军训`

2. **选择变化维度**
   - 从18个维度中选择（场景、光影、情绪、角度等）
   - 可以点击"全选"或"随机选择"

3. **设置生成数量**
   - 输入1-20之间的数字

4. **生成变体**
   - 点击"生成变体"按钮
   - 等待系统生成多个变体提示词

5. **选择变体并生成图片**
   - 勾选想要生成图片的变体
   - 选择图片比例（1:1、9:16、16:9、3:4、4:3）
   - 点击"批量生成图片"

6. **下载图片**
   - 单张下载：点击每张图片下的"下载"按钮
   - 批量下载：点击"📥 下载所有图片"按钮

## 🔍 功能验证

### 测试后端是否正常运行
```bash
# 在新的终端窗口运行
curl http://localhost:8000/api/health
```

应该返回：
```json
{"status":"healthy","timestamp":"2025-08-10T14:30:00.000000"}
```

### 测试页面
- **主界面**：`index.html`
- **功能演示**：`demo_new_features.html`
- **变体测试**：`test_fixed_variants.html`

## ⚠️ 常见问题

### 1. 端口被占用
如果提示端口8000被占用：
```bash
# 查找占用端口的进程
lsof -i :8000

# 或者修改main.py中的端口
# 将 port=8000 改为 port=8001
```

### 2. 模块未找到错误
```bash
# 确保在虚拟环境中安装了所有依赖
pip install -r requirements.txt
```

### 3. API调用失败
- 检查网络连接
- 确认API密钥有效（已内置）
- 查看后端控制台日志

## 🛑 停止服务

在运行后端的终端窗口中按 `Ctrl+C` 即可停止服务

## 📊 系统架构

```
用户界面 (index.html)
    ↓
FastAPI后端 (http://localhost:8000)
    ↓
Google API
    ├── Gemini 2.0 Flash Exp (变体生成)
    └── Imagen 4.0 Preview (图片生成)
```

## 🔑 API密钥

系统已内置API密钥：
```
AIzaSyB-ZYo5kMjtpqnOyjEELzy8PD8VnMTuvkw
```

该密钥同时支持Gemini和Imagen API调用。

## 📝 完整命令汇总

```bash
# 快速启动（复制粘贴即可）
cd /Users/c.joelin/Desktop/跨海帆-闪图/backend && \
source venv/bin/activate && \
python main.py

# 在浏览器打开
open /Users/c.joelin/Desktop/跨海帆-闪图/index.html
```

---

💡 **提示**：建议将此文档保存为书签，方便随时查阅启动步骤。